<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"> 
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Zest Admin Dashboard</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no"
    />
    <link rel="stylesheet" href="admin/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    />
    <link rel="stylesheet" href="admin/css/ready.css" />
    <link rel="stylesheet" href="admin/css/demo.css" />
  </head>

  <body>
    <div class="wrapper">
      <div class="main-header">
        <div class="logo-header">
          <a href="index.html" class="logo"> Video Dashboard </a>
          <button
            class="navbar-toggler sidenav-toggler ml-auto"
            type="button"
            data-toggle="collapse"
            data-target="#sidebar"
            aria-controls="sidebar"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <button class="topbar-toggler more">
            <i class="la la-ellipsis-v"></i>
          </button>
        </div>
        <nav class="navbar navbar-header navbar-expand-lg">
          <div class="container-fluid">
            <form class="navbar-left navbar-form nav-search mr-md-3" action="">
              <div class="input-group">
                <input
                  type="text"
                  placeholder="Search ..."
                  class="form-control"
                />
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="la la-search search-icon"></i>
                  </span>
                </div>
              </div>
            </form>
            <ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
              <li class="nav-item dropdown">
                <a
                  class="dropdown-toggle profile-pic"
                  data-toggle="dropdown"
                  href="#"
                  aria-expanded="false"
                >
                  <img
                    src="assets/img/profile.jpg"
                    alt="user-img"
                    width="36"
                    class="img-circle"
                  />
                  <span>Admin</span>
                </a>
                <ul class="dropdown-menu dropdown-user">
                  <li>
                    <div class="user-box">
                      <div class="u-img">
                        <img src="assets/img/profile.jpg" alt="user" />
                      </div>
                      <div class="u-text">
                        <h4>Admin</h4>
                        <p class="text-muted">admin@gmail.com</p>
                        <a
                          href="adminProfile.html"
                          class="btn btn-rounded btn-danger btn-sm"
                          >View Profile</a
                        >
                      </div>
                    </div>
                  </li>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="adminProfile.html"
                    ><i class="ti-user"></i> My Profile</a
                  >
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="adminLogin.html"
                    ><i class="fa fa-power-off"></i> Logout</a
                  >
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </div>

      <!--Sidebar-->
         <div class="sidebar">
            <div class="scrollbar-inner sidebar-wrapper">
                <ul class="nav">
                    <li class="nav-item active">
                        <a href="adminDash">
                            <i class="la la-dashboard"></i>
                            <p>Dashboard</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="manageUser">
                            <i class="la la-users"></i>
                            <p>Manage User</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="manageTrainer">
                            <i class="la la-user"></i>
                            <p>Manage Trainer</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="manageAttendance">
                            <i class="la la-table"></i>
                            <p>Attendance</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="manageMembership">
                            <i class="la la-cc-mastercard"></i>
                            <p>Membership</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="manageDiet">
                            <i class="la la-coffee"></i>
                            <p>Diet</p>
                        </a>
                    </li>
                    <li class="nav-item">
						<a href="manageSchedule">
							<i class="la la-calendar"></i>
							<p>Manage Schedule</p>
						</a>
					</li>
                    <li class="nav-item">
                        <a href="manageVideo">
                            <i class="la la-file"></i>
                            <p>Manage Video</p>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="adminLogout">
                            <i class="la la-power-off"></i>
                            <p>Log Out</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
      <!--Sidebar Ends-->

      <div class="main-panel">
        <div class="content">
          <div class="container-fluid">
            <h4 class="page-title">Dashboard</h4>
            <div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Table</h4>
                    <p class="card-category mb-2">Video Table</p>
                    <a href="addVideo">
                      <button class="btn btn-primary">Add Video</button>
                    </a>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table
                        class="table table-head-bg-success table-striped table-hover"
                      >
                        <thead>
                          <tr>
                            <th scope="col">Video Id</th>
                            <th scope="col">Video Link</th>
                            <th scope="col">Video Name</th>
                            <th scope="col">Uploaded By</th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr th:each="v : ${vList}">
			            <td th:text="${v.id}"></td>
			            <td>
						   <a th:href=${v.videoUrl} th:text="${v.videoUrl}"></a>
						</td>
			            <td th:text="${v.videoTitle}"></td>
			            <td th:text="${v.userName}"></td>
						<td>
						    <a th:href="@{'/deleteVideo/' + ${v.id}}">
						        <button class="btn btn-danger" id="deleteModal">Delete</button>
						    </a>
						</td>
			        </tr>
                          <!-- More rows as needed -->
                        </tbody>
                      </table>
                    </div>

                    <ul class="pagination pg-primary">
                      <li class="page-item">
                        <a class="page-link" href="#" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                          <span class="sr-only">Previous</span>
                        </a>
                      </li>
                      <li class="page-item active">
                        <a class="page-link" href="#">1</a>
                      </li>
                      <li class="page-item">
                        <a class="page-link" href="#">2</a>
                      </li>
                      <li class="page-item">
                        <a class="page-link" href="#">3</a>
                      </li>
                      <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                          <span class="sr-only">Next</span>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="admin/js/core/jquery.3.2.1.min.js"></script>
    <script src="admin/js/core/popper.min.js"></script>
    <script src="admin/js/core/bootstrap.min.js"></script>
    <script src="admin/js/ready.min.js"></script>
       <script>
    document.addEventListener("DOMContentLoaded", function () {
        // Select all delete buttons
        const deleteButtons = document.querySelectorAll(".btn-danger");

        deleteButtons.forEach(button => {
            button.addEventListener("click", function (event) {
                event.preventDefault();

                // Get the delete URL from the button's parent link
                const deleteUrl = this.closest("a").getAttribute("href");

                // Check if a modal already exists; if so, remove it
                const existingModal = document.getElementById("deleteModal");
                if (existingModal) {
                    existingModal.remove();
                }

                // Create the confirmation modal
                const modalHTML = `
                    <div id="deleteModal" class="modal" tabindex="-1" role="dialog" style="display: block; background: rgba(0,0,0,0.5); position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1050;">
                        <div class="modal-dialog" role="document" style="margin: 10% auto; max-width: 500px;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Confirm Deletion</h5>
                                    <button type="button" class="close" aria-label="Close" onclick="closeModal()">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p>Do you want to delete this record?</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" id="confirmDeleteButton">Yes</button>
                                    <button type="button" class="btn btn-secondary" onclick="closeModal()">No</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                // Append the modal to the body
                document.body.insertAdjacentHTML("beforeend", modalHTML);

                // Attach click event to the confirm delete button
                const confirmButton = document.getElementById("confirmDeleteButton");
                confirmButton.addEventListener("click", function () {
                    // Redirect to the delete URL
                    window.location.href = deleteUrl;
                });
            });
        });
    });

    // Function to close the modal
    function closeModal() {
        const modal = document.getElementById("deleteModal");
        if (modal) {
            modal.remove();
        }
    }
</script>
  </body>
</html>
